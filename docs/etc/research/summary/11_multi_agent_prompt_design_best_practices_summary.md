### **멀티 에이전트 시스템 프롬프트 설계 요약**

이 문서는 멀티 에이전트 시스템(MAS)에서 효과적인 프롬프트 설계를 위한 포괄적인 가이드를 제공합니다. 단순한 지시를 넘어 프롬프트를 에이전트의 정체성을 정의하고, 복잡한 워크플로우를 구조화하며, 시스템의 신뢰성과 보안을 보장하는 핵심 아키텍처 도구로써 다룹니다.

**주요 내용:**

1.  에이전트 정체성 설계:
    *   전문화: 단일 만능 에이전트보다 특정 작업을 전담하는 전문화된 에이전트가 더 효율적입니다.
    *   역할-목표-배경 프레임워크: `역할`(기능), `목표`(결과), `배경`(맥락/경험)을 통해 에이전트의 페르소나를 구체화하여 견고성과 추론 능력을 향상시킵니다.
    *   세계관 정의: 프롬프트는 에이전트가 사용할 수 있는 컨텍스트, 도구, 제약 조건을 명확하게 정의해야 합니다.

2.  오케스트레이션 및 협업:
    *   오케스트레이터 설계: 리더 에이전트는 사용자 쿼리를 명확한 목표, 출력 형식, 작업 경계를 가진 하위 작업으로 분해해야 합니다. 시스템의 복잡성을 오케스트레이터 프롬프트에 집중시키는 것이 효율적입니다.
    *   통신 구조화: 에이전트 간의 정보 교환은 JSON이나 XML과 같은 구조화된 형식을 강제하여 예측 가능성을 높여야 합니다.
    *   상호작용 토폴로지: 순차적, 계층적, 토론형 등 다양한 상호작용 패턴을 설계하여 환각을 줄이고 결과물의 신뢰성을 높일 수 있습니다.

3.  고급 추론 및 신뢰성 향상 기법:
    *   추론 패턴: CoT(사고의 연쇄), Layered-CoT(계층적 사고의 연쇄)를 통해 복잡한 추론을 구조화합니다.
    *   자가 수정 루프: Self-Refine(성찰), Self-Verification(자기 검증)과 같은 기법을 통해 에이전트가 자신의 작업을 비판하고 개선하도록 유도하여 정확성을 높입니다.
    *   원칙 기반 프롬프트: 에이전트가 작업 해결에 필요한 최적의 규칙을 스스로 생성하게 하는 메타-인지적 접근법입니다.

4.  프레임워크별 구현:
    *   AutoGen: 대화형 에이전트 중심. `system_message`로 역할을 정의.
    *   CrewAI: 역할 기반 협업 중심. `role`, `goal`, `backstory`로 에이전트 정의.
    *   LangGraph: 상태 기반 워크플로우 중심. 노드 내에서 프롬프트를 사용하여 상태를 처리.

5.  보안 및 디버깅:
    *   보안: '계획 후 실행', '권한/격리 에이전트'와 같은 프롬프트 기반 아키텍처 패턴을 통해 프롬프트 인젝션 공격을 완화합니다.
    *   디버깅: LangSmith와 같은 추적 도구를 활용하고, 디버깅 용이성을 위해 프롬프트에서 구조화된 출력을 강제하는 것이 중요합니다.

**결론:**
최신 멀티 에이전트 시스템의 프롬프트 설계는 정적인 지시를 넘어, 협력적이고 자가 수정이 가능한 동적 프로세스를 설계하는 방향으로 진화하고 있습니다. 프롬프트 엔지니어의 역할은 세부 사항을 지시하는 '마이크로매니저'에서 메타-인지 프로세스를 설계하는 '시스템 아키텍트'로 발전하고 있습니다. 